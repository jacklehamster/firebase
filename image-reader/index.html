<!DOCTYPE html>
<html>
<head>
        <script src="/header.js"></script>
        <script src="/google-analytics.js" tracking-id="UA-41589840-12"></script>
<script src='https://cdn.firebase.com/js/client/2.2.0/firebase.js'></script>
<meta charset=utf-8 />
<script src="imagereader.js"></script>
<script>
function updateTextBox() {
   var changeButton = document.getElementById("change");
   var tf = document.getElementById("path");
   var img = document.getElementById('img');
   tf.value = img.firebase.ref().toString();
   tf.addEventListener("change",
        function(e){
            changeButton.disabled = false;
            e.currentTarget.removeEventListener(e.type,arguments.callee);
        });
  changeButton.addEventListener("click",
        function(e) {
            detachFirebase(img);
            attachFirebase(img,tf.value);
        });
}

function init() {
        if(window==top) {
                document.getElementById("location").style.display = "";
        }
}
        
</script>
<title>Image Reader</title>

</head>
<body style="margin:0px" onLoad="init()">
<span id="location" style="display:none">
<input id="change" type="button" value="change" disabled="disabled">
<input id="path" type="text" onfocus="this.select();" onmouseup="return false;"  style="width:80%;"><br></span>
<img id="img" onLoad="updateTextBox()" class="firebase-img" width="100%" firebase-src="https://dynamic-image.firebaseio.com/images/0412c1fbf31783c697327b6e3d5d0d62/src">


</body>
</html>
