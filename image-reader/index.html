<!DOCTYPE html>
<html>
<head>
        <script src="../styling/header.js"></script>
<script src='https://cdn.firebase.com/js/client/2.2.0/firebase.js'></script>
<meta charset=utf-8 />
<script src="imagereader.js"></script>
<script>
function updateTextBox() {
   var changeButton = document.getElementById("change");
   var tf = document.getElementById("path");
   var img = document.getElementById('img');
   tf.value = img.firebase.ref().toString();
   tf.addEventListener("change",
        function(e){
            changeButton.disabled = false;
            e.currentTarget.removeEventListener(e.type,arguments.callee);
        });
  changeButton.addEventListener("click",
        function(e) {
            detachFirebase(img);
            attachFirebase(img,tf.value);
        });
}

function init() {
        changeButton.style.display = "";
        tf.style.display = "";
}
        
</script>
<title>Image Reader</title>

</head>
<body style="margin:0px" onLoad="init()">
<input id="change" type="button" value="change" disabled="disabled" style="display:none">
<input id="path" type="text" style="width:80%;display:none"><br>
<img id="img" onLoad="updateTextBox()" class="firebase-img" width="100%" firebase-src="https://dynamic-image.firebaseio.com/images/0412c1fbf317/83c697327b6e/3d5d0d62/src">


</body>
</html>
